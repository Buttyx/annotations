# Annotations tool build script

Documentation for the small build script working with ANT.

## Usage
Go in the build folder and type `ant TARGET`, as simple as any ANT build script.

## Tasks

### optimize
`ant optimize`

Combinines all the javascript files together and minify them. It also add the copyright and the version at the top of the final script file. The name of this final file can be defined with the property `optimization.out`.

To use this new file, just change the line
`<script data-main="js/libs/require/config/config" src="js/libs/require/require.js"></script>`
by
`<script src="js/libs/require/require.js"></script>
<script src="OPTIMZED-FILE.js"></script>`
in `index.html`

### validate-all
`ant validate-all`

Validates all the files in the js folder (exclude lib) with JSHint.
It generates a XML report-file.
You can specifiy  the name and folder of this file via the property `jshint.log.file`.

The JSHint rules can also be modified in the file `config/jshint.properties`. The supported global vars are listed in `config/jshint`.globals.

### validate-one
`ant validate-one -Dfile=js/FILE_TO_VALIDATE.js`

Validates the given file with JSHint.

The JSHint rules can also be modified in the file `config/jshint.properties`. The supported global vars are listed in `config/jshint`.globals.

#### Parameter

**file*** : File to validate, required.

### Tests

Runs the unit tests with PhantomJS, an headless browser environnement.

Currently the playerAdapter tests are not supported.

### Less
`ant less`

Compiles the less files in `style/` to `style/style.css` and `style/print.css`. You can change the less files folder through the property `style.dir`.

### jsdoc
`ant jsodc`

Generates the technical documentation via jsdoc3 in the folder `docs`. You can change the documentation destination folder through the property `docs.dir`.

The jsdoc configuration is done through the `jsdoc-conf.json` file. This file is by default in the `config` folder. But you can change to path to it with the property `docs.config`.

All the informations concerning the jsdoc3 configuration can be found on this [page](http://usejsdoc.org/about-configuring-jsdoc.html).

## Properties

The project properties can be found in `config/project.properties`.

| Name | Description |
| ------ | -----: |
| `version` | The current version of the tool |
| `copyright` | Copyright from the tool |
| `src.dir` | The source directory for the javascript files |
| `tools.dir` | The directory where all the build tools can be found|
| `jshint.properties` | Path to  JSHint properties files |
| `jshint.globals`| Path to the file with the list of supported globals for JSHint. |
|`jshint.log.file`| Name of the JSHint log file.|
|`optimization.out`| Name of the file generated by the optimization task.|
|`docs.dir`| Destintation folder for the documentation.|
|`docs.config`| Path to the jsdoc3 configuration file.|
|`docs.readme`| README file to include on the index page from javascript documentation.|
|`style.dir`| Folder containing all the style files.|